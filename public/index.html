<!DOCTYPE html>
<!-- public/index.html - Frontend HTML template -->
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Facilita SENAI</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Inter:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="/images/logo.png" alt="Facilita SENAI" class="logo-img sidebar-logo" />
                </div>
                <div style="margin-top:10px;">
                    <button id="notificationsBtnSidebar" class="notifications-btn-sidebar" aria-label="Notificações"
                        style="background:transparent;border:none;cursor:pointer;">
                        <i data-lucide="bell"></i>
                        <span id="notificationsCountSidebar"
                            style="position:relative;left:6px;top:-6px;background:var(--status-error);color:white;border-radius:10px;padding:2px 6px;font-size:0.7rem;display:none;">0</span>
                    </button>
                </div>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link active" data-module="home">
                            <i data-lucide="layout-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-module="schedules">
                            <i data-lucide="calendar"></i>
                            <span>Agendamento</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-module="classroom">
                            <i data-lucide="book-open"></i>
                            <span>Classroom</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-module="replacements">
                            <i data-lucide="refresh-cw"></i>
                            <span>Reposições</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-module="jobs">
                            <i data-lucide="briefcase"></i>
                            <span>Vagas</span>
                        </a>
                    </li>
                    <li id="profile-link" style="display: none;">
                        <a href="#" class="nav-link" data-module="profile">
                            <i data-lucide="user"></i>
                            <span>Perfil</span>
                        </a>
                    </li>
                    <li id="admin-users-link" style="display: none;">
                        <a href="#" class="nav-link" data-module="users">
                            <i data-lucide="users"></i>
                            <span>Usuários</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="#" id="logoutBtn" class="nav-link logout">
                    <i data-lucide="log-out"></i>
                    <span>Sair</span>
                </a>
            </div>
        </aside>
        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <button class="hamburger" aria-label="Abrir menu">☰</button>
                    <h1 id="page-title">Dashboard</h1>
                    <p id="current-date">Segunda, 01 de Dezembro</p>
                </div>
                <div class="header-right">
                    <div id="notificationsContainer"
                        style="display:flex; align-items:center; gap:8px; margin-right:10px; position:relative;">
                        <button id="notificationsBtn" class="notifications-btn" aria-label="Notificações"
                            style="background:transparent;border:none;cursor:pointer;position:relative;">
                            <i data-lucide="bell"></i>
                            <span id="notificationsCount"
                                style="position:absolute;top:-6px;right:-6px;background:var(--status-error);color:white;border-radius:10px;padding:2px 6px;font-size:0.7rem;display:none;">0</span>
                        </button>
                        <div id="notificationsPanel" class="notifications-panel"
                            style="display:none; position:absolute; right:0; top:44px; width:320px; background:white; border-radius:8px; box-shadow:var(--shadow-sm); z-index:1000;">
                            <div
                                style="padding:8px 12px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center;">
                                <strong>Notificações</strong>
                                <button id="markAllReadBtn" class="small"
                                    style="background:transparent;border:none;color:var(--text-secondary);cursor:pointer;font-size:0.85rem;">Marcar
                                    todas</button>
                            </div>
                            <div id="notificationsList" style="max-height:320px; overflow:auto;">
                                <div id="notificationsEmpty" style="padding:12px;color:var(--text-secondary);">Sem
                                    notificações</div>
                            </div>
                            <div style="padding:8px;text-align:center;border-top:1px solid #eee;"><button
                                    id="notificationsClose" class="small"
                                    style="background:transparent;border:none;cursor:pointer;color:var(--text-secondary);">Fechar</button>
                            </div>
                        </div>
                    </div>
                    <div class="user-profile">
                        <div class="avatar-circle">
                            <span id="user-initials">U</span>
                        </div>
                        <div class="user-info">
                            <h4 id="user-name">Usuário</h4>
                            <span id="user-role">Aluno</span>
                        </div>
                    </div>
                </div>
            </header>
            <div id="content-area" class="content-area">
                <div class="welcome-card card">
                    <h3>Bem-vindo ao Facilita SENAI</h3>
                    <p>Selecione um módulo no menu lateral para começar.</p>
                </div>
            </div>
        </main>
    </div>
    <div id="scheduleModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Nova Reserva</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="scheduleForm">
                <div class="form-group">
                    <label>Título</label>
                    <input type="text" name="title" required>
                </div>
                <div class="form-group">
                    <label>Sala</label>
                    <select name="room_id" id="roomSelect" required>
                    </select>
                </div>
                <div class="form-group">
                    <label>Turma (Opcional)</label>
                    <select name="class_id" id="classSelect">
                        <option value="">Selecione uma turma...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" name="date" required>
                </div>
                <div class="form-group">
                    <label>Início</label>
                    <select name="start_time" id="startTimeSelect" required>
                    </select>
                </div>
                <div class="form-group">
                    <label>Fim</label>
                    <select name="end_time" id="endTimeSelect" required>
                    </select>
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea name="description"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Reservar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="scheduleDetailModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Detalhes do Agendamento</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="scheduleDetailContent">
                <div style="margin-bottom:8px;"><strong id="sd_title">Título</strong></div>
                <div style="font-size:0.95rem;color:var(--text-secondary);" id="sd_meta">Sala • Turma • Professor</div>
                <div style="margin-top:12px;" id="sd_description">Descrição...</div>
                <div style="margin-top:12px;color:var(--text-secondary);" id="sd_time">Data / Hora</div>
            </div>
            <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px;">
                <button class="btn close-modal-btn">Fechar</button>
            </div>
        </div>
    </div>
    <div id="replacementModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Solicitar Reposição</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="replacementForm">
                <div class="form-group" id="studentSelectGroup" style="display: none;">
                    <label>Aluno</label>
                    <select name="student_id" id="studentSelect">
                        <option value="">Selecione um aluno...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Matéria / Assunto</label>
                    <input type="text" name="subject" required>
                </div>
                <div class="form-group">
                    <label>Data Original da Aula</label>
                    <input type="date" name="original_date" required>
                </div>
                <div class="form-group">
                    <label>Data Sugerida para Reposição</label>
                    <input type="datetime-local" name="requested_date" required>
                </div>
                <div class="form-group">
                    <label>Motivo</label>
                    <textarea name="reason" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Solicitar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="indicationModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Indicar Aluno</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="indicationForm">
                <input type="hidden" name="job_id" id="indicationJobId">
                <p id="indicationJobTitle" style="margin-bottom: 15px; font-weight: 500;"></p>
                <div class="form-group">
                    <label>Email do Aluno</label>
                    <input type="email" name="email" placeholder="email@exemplo.com">
                </div>
                <div class="form-group" style="text-align: center; margin: 10px 0;">
                    <span>OU</span>
                </div>
                <div class="form-group">
                    <label>CPF do Aluno</label>
                    <input type="text" name="cpf" placeholder="000.000.000-00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Indicar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="applyModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Candidatar-se à Vaga</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="applyForm">
                <input type="hidden" id="applyJobId" name="job_id" />
                <div class="form-group">
                    <label for="applyMessage">Mensagem (opcional)</label>
                    <textarea id="applyMessage" name="message" rows="4" class="form-control"
                        placeholder="Explique por que você é um bom candidato..."></textarea>
                </div>
                <div class="form-group">
                    <label for="applyCv">Link para CV / Portfólio (opcional)</label>
                    <input id="applyCv" name="cv" class="form-control" placeholder="https://..." />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Enviar Candidatura</button>
                </div>
            </form>
        </div>
    </div>
    <div id="jobModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Criar / Editar Vaga</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="jobForm">
                <input type="hidden" id="jobId" name="id" />
                <div class="form-group">
                    <label>Título</label>
                    <input type="text" id="jobTitle" name="title" required />
                </div>
                <div class="form-group">
                    <label>Empresa</label>
                    <input type="text" id="jobCompany" name="company" required />
                </div>
                <div class="form-group">
                    <label>Cargo</label>
                    <input type="text" id="jobPosition" name="position" />
                </div>
                <div class="form-group">
                    <label>Horário</label>
                    <input type="text" id="jobSchedule" name="schedule" placeholder="Ex: 08:00-12:00" />
                </div>
                <div class="form-group">
                    <label>Endereço</label>
                    <input type="text" id="jobAddress" name="address" />
                </div>
                <div class="form-group">
                    <label>Valor</label>
                    <input type="text" id="jobSalary" name="salary" placeholder="R$ 1.500,00" />
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea id="jobDescription" name="description" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="jobType" name="type" required>
                        <option value="estagio">Estágio</option>
                        <option value="emprego">Emprego</option>
                        <option value="jovem_aprendiz">Jovem Aprendiz</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="applicationsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Candidaturas para <span id="applicationsJobTitle"></span></h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="appContent" style="padding:12px; max-height:480px; overflow:auto;">
            </div>
            <div class="modal-footer">
                <label>Sala</label>
                <select name="room_id" id="roomSelect" required>
                </select>
            </div>
            <div class="form-group">
                <label>Turma (Opcional)</label>
                <select name="class_id" id="classSelect">
                    <option value="">Selecione uma turma...</option>
                </select>
            </div>
            <div class="form-group">
                <label>Data</label>
                <input type="date" name="date" required>
            </div>
            <div class="form-group">
                <label>Início</label>
                <input type="time" name="start_time" required>
            </div>
            <div class="form-group">
                <label>Fim</label>
                <input type="time" name="end_time" required>
            </div>
            <div class="form-group">
                <label>Descrição</label>
                <textarea name="description"></textarea>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn close-modal-btn">Cancelar</button>
                <button type="submit" class="btn btn-primary">Reservar</button>
            </div>
            </form>
        </div>
    </div>
    <div id="replacementModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Solicitar Reposição</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="replacementForm">
                <div class="form-group" id="studentSelectGroup" style="display: none;">
                    <label>Aluno</label>
                    <select name="student_id" id="studentSelect">
                        <option value="">Selecione um aluno...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Matéria / Assunto</label>
                    <input type="text" name="subject" required>
                </div>
                <div class="form-group">
                    <label>Data Original da Aula</label>
                    <input type="date" name="original_date" required>
                </div>
                <div class="form-group">
                    <label>Data Sugerida para Reposição</label>
                    <input type="datetime-local" name="requested_date" required>
                </div>
                <div class="form-group">
                    <label>Motivo</label>
                    <textarea name="reason" required></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Solicitar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="indicationModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Indicar Aluno</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="indicationForm">
                <input type="hidden" name="job_id" id="indicationJobId">
                <p id="indicationJobTitle" style="margin-bottom: 15px; font-weight: 500;"></p>
                <div class="form-group">
                    <label>Email do Aluno</label>
                    <input type="email" name="email" placeholder="email@exemplo.com">
                </div>
                <div class="form-group" style="text-align: center; margin: 10px 0;">
                    <span>OU</span>
                </div>
                <div class="form-group">
                    <label>CPF do Aluno</label>
                    <input type="text" name="cpf" placeholder="000.000.000-00">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Indicar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="applyModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Candidatar-se à Vaga</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="applyForm">
                <input type="hidden" id="applyJobId" name="job_id" />
                <div class="form-group">
                    <label for="applyMessage">Mensagem (opcional)</label>
                    <textarea id="applyMessage" name="message" rows="4" class="form-control"
                        placeholder="Explique por que você é um bom candidato..."></textarea>
                </div>
                <div class="form-group">
                    <label for="applyCv">Link para CV / Portfólio (opcional)</label>
                    <input id="applyCv" name="cv" class="form-control" placeholder="https://..." />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Enviar Candidatura</button>
                </div>
            </form>
        </div>
    </div>
    <div id="jobModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Criar / Editar Vaga</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="jobForm">
                <input type="hidden" id="jobId" name="id" />
                <div class="form-group">
                    <label>Título</label>
                    <input type="text" id="jobTitle" name="title" required />
                </div>
                <div class="form-group">
                    <label>Empresa</label>
                    <input type="text" id="jobCompany" name="company" required />
                </div>
                <div class="form-group">
                    <label>Cargo</label>
                    <input type="text" id="jobPosition" name="position" />
                </div>
                <div class="form-group">
                    <label>Horário</label>
                    <input type="text" id="jobSchedule" name="schedule" placeholder="Ex: 08:00-12:00" />
                </div>
                <div class="form-group">
                    <label>Endereço</label>
                    <input type="text" id="jobAddress" name="address" />
                </div>
                <div class="form-group">
                    <label>Valor</label>
                    <input type="text" id="jobSalary" name="salary" placeholder="R$ 1.500,00" />
                </div>
                <div class="form-group">
                    <label>Descrição</label>
                    <textarea id="jobDescription" name="description" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select id="jobType" name="type" required>
                        <option value="estagio">Estágio</option>
                        <option value="emprego">Emprego</option>
                        <option value="jovem_aprendiz">Jovem Aprendiz</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>
    <div id="applicationsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Candidaturas para <span id="applicationsJobTitle"></span></h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="appContent" style="padding:12px; max-height:480px; overflow:auto;">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn close-modal-btn">Fechar</button>
            </div>
        </div>
    </div>
    <div id="classroomSyncModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Sincronizar Classroom</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="classroomSyncForm">
                <div class="form-group">
                    <label>Código da Turma (Google Classroom)</label>
                    <input type="text" name="courseCode" required placeholder="Ex: 1234567890">
                    <small style="color:var(--text-secondary)">Encontre o código na URL do curso:
                        classroom.google.com/c/<b>CODIGO</b></small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn close-modal-btn">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Sincronizar</button>
                </div>
            </form>
        </div>
    </div>
    <script src="js/dashboard.js"></script>
</body>
</html>